<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">


<mapper namespace="com.deu.Amall.dao.OrderMapper">
	<select id="getMaster" resultType="com.deu.Amall.domain.OrderMasterVO">
		SELECT *
		FROM ordermaster
		where order_id = #{orderId}
	</select>

	<select id="getList" resultType="com.deu.Amall.util.PubMap">
		SELECT *
		FROM orderlist
		where order_id = #{orderId}
	</select>
	
<!--    	<insert id="insertOrderMaster" useGeneratedKeys="true" keyColumn="order_id" keyProperty="orderId"> -->
	<insert id="insertOrderMaster" >
		<selectKey keyProperty="orderId" order="BEFORE"
			resultType="int">
			SELECT NVL(MAX(order_id) + 1, 1) FROM ordermaster
		</selectKey>

		INSERT INTO ordermaster
		(order_id, order_date, order_amt, state,  
		 insrt_user_id, insrt_dt, updt_user_id, updt_dt)
		VALUES
		(
		#{orderId},
		#{orderDate}, #{orderAmt}, #{state},
		#{insrtUserId}, sysdate, #{insrtUserId}, sysdate
		)
	</insert>
	
</mapper>